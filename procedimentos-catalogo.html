<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Procedimentos - Ligon Resort Spa</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #F5F5F5;
            color: #2E5F35;
            overflow-x: hidden;
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            width: 100%;
            height: 60vh;
            min-height: 400px;
            background: linear-gradient(135deg, rgba(46, 95, 53, 0.95) 0%, rgba(155, 138, 107, 0.9) 50%, rgba(46, 95, 53, 0.95) 100%), url('images/marmore_verde.jpg') center center;
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(232, 213, 183, 0.1) 0%, transparent 70%);
            animation: shimmer 8s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% {
                transform: translate(0%, 0%) rotate(0deg);
                opacity: 0.3;
            }
            50% {
                transform: translate(10%, 10%) rotate(180deg);
                opacity: 0.6;
            }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: #FFFFFF;
            padding: 40px 20px;
            background: rgba(46, 95, 53, 0.2);
            border-radius: 30px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(232, 213, 183, 0.3);
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-content h1 {
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.5);
            letter-spacing: 2px;
            background: linear-gradient(to right, #FFFFFF, #E8D5B7, #FFFFFF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-content p {
            font-size: clamp(1.2rem, 3vw, 2rem);
            font-weight: 300;
            text-shadow: 1px 1px 8px rgba(0, 0, 0, 0.5);
            color: #E8D5B7;
            letter-spacing: 1px;
        }

        /* Main Content */
        .catalog-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Filters Section */
        .filters-section {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #9B8A6B;
            font-size: 1.1rem;
        }

        .search-box input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: 2px solid #E8D5B7;
            border-radius: 50px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            background: #FFFFFF;
        }

        .search-box input:focus {
            outline: none;
            border-color: #9B8A6B;
            box-shadow: 0 4px 15px rgba(155, 138, 107, 0.2);
        }

        .filter-dropdown select {
            padding: 15px 30px;
            border: 2px solid #E8D5B7;
            border-radius: 50px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            color: #2E5F35;
            background: #FFFFFF;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
        }

        .filter-dropdown select:focus {
            outline: none;
            border-color: #9B8A6B;
            box-shadow: 0 4px 15px rgba(155, 138, 107, 0.2);
        }

        /* Procedures Grid */
        .procedures-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .procedure-card {
            background: #FFFFFF;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .procedure-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .procedure-image {
            position: relative;
            width: 100%;
            height: 250px;
            overflow: hidden;
            background: linear-gradient(135deg, #E8D5B7 0%, #D4C4A8 100%);
        }

        .procedure-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .procedure-card:hover .procedure-image img {
            transform: scale(1.1);
        }

        .procedure-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #9B8A6B 0%, #8B7A5B 100%);
            color: #FFFFFF;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .procedure-info {
            padding: 25px;
        }

        .procedure-category {
            color: #9B8A6B;
            font-size: 0.9rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .procedure-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2E5F35;
            margin-bottom: 12px;
            line-height: 1.3;
        }

        .procedure-description {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .procedure-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: #9B8A6B;
            margin-top: 15px;
        }

        .procedure-price span {
            font-size: 1rem;
            font-weight: 400;
            color: #999;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 50px;
            flex-wrap: wrap;
        }

        .pagination button {
            padding: 12px 20px;
            border: 2px solid #E8D5B7;
            background: #FFFFFF;
            color: #2E5F35;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .pagination button:hover:not(:disabled) {
            background: #9B8A6B;
            color: #FFFFFF;
            border-color: #9B8A6B;
            transform: translateY(-2px);
        }

        .pagination button.active {
            background: linear-gradient(135deg, #9B8A6B 0%, #8B7A5B 100%);
            color: #FFFFFF;
            border-color: #9B8A6B;
        }

        .pagination button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            color: #666;
            font-size: 0.95rem;
            margin: 0 15px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: #999;
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #E8D5B7;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #666;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .procedures-grid {
                grid-template-columns: 1fr;
            }

            .filters-section {
                flex-direction: column;
            }

            .search-box,
            .filter-dropdown {
                width: 100%;
            }

            .hero-section {
                height: 40vh;
                min-height: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- Header Navigation -->
    <header style="background: #FFFFFF; box-shadow: 0 2px 10px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000;">
        <nav style="max-width: 1400px; margin: 0 auto; padding: 20px; display: flex; justify-content: space-between; align-items: center;">
            <a href="Eliá SPA _ Eliá SPA.html" style="text-decoration: none;">
                <img src="images/ligon_verde.png" alt="Ligon Resort Spa" style="max-height: 50px;">
            </a>
            <a href="Eliá SPA _ Eliá SPA.html" style="color: #2E5F35; text-decoration: none; font-weight: 600; padding: 10px 20px; border-radius: 25px; transition: all 0.3s;">
                <i class="fas fa-arrow-left"></i> Voltar
            </a>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1>✨ Conheça Nossos Procedimentos ✨</h1>
            <p>Experiências únicas de bem-estar e renovação</p>
        </div>
    </section>

    <!-- Main Content -->
    <div class="catalog-container">
        <!-- Filters -->
        <div class="filters-section">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Buscar procedimento...">
            </div>
            <div class="filter-dropdown">
                <select id="categoryFilter">
                    <option value="">Todas as Categorias</option>
                    <option value="rituais">Rituais Ligon</option>
                    <option value="massagens">Massagens</option>
                    <option value="head-spa">Head Spa</option>
                    <option value="estetica-facial">Estética Facial</option>
                    <option value="aqua-ligon">Linha Aqua Ligon</option>
                    <option value="spa-day">Spa Day</option>
                </select>
            </div>
            <div class="filter-dropdown">
                <select id="sortFilter">
                    <option value="name">Ordenar por Nome</option>
                </select>
            </div>
        </div>

        <!-- Procedures Grid -->
        <div class="procedures-grid" id="proceduresGrid">
            <!-- Cards will be inserted here by JavaScript -->
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination">
            <!-- Pagination buttons will be inserted here by JavaScript -->
        </div>
    </div>

    <script>
        // Procedures data from official catalog
        const proceduresData = [
            // 1. RITUAIS LIGON
            {
                id: 1,
                name: "Ligon Soul Therapy",
                category: "rituais",
                description: "Renovação Profunda & Aconchego. Uma imersão completa que combina purificação, esfoliação e massagem terapêutica com óleos e cremes aquecidos. Inclui: escalda-pés, esfoliação, massagem com óleo vegetal aquecido, aromaterapia, esfoliação corporal completa e toalhas térmicas.",
                price: 316.99,
                image: "images/IMG-20251114-WA0504.jpg",
                duration: "120 minutos"
            },
            {
                id: 2,
                name: "Ligon Nature Flow",
                category: "rituais",
                description: "Reconexão Natural & Bem-Estar Profundo. Inspirado na leveza da natureza, une toque quente, extratos florais e aromaterapia para restaurar o equilíbrio físico e emocional. Inclui escalda-pés com sais e ervas naturais, massagem com óleo aquecido e toalhas térmicas.",
                price: 322.99,
                image: "images/IMG-20251114-WA0512.jpg",
                duration: "90 minutos"
            },
            {
                id: 3,
                name: "Ligon Experience",
                category: "rituais",
                description: "A Essência do Relaxamento Profundo. Combina imersão sensorial, toque acolhedor e técnicas exclusivas que acalmam a mente, aquecem o corpo e restauram as energias. Inclui escalda-pés aromático, massagem com vela e aromaterapia personalizada.",
                price: 406.90,
                image: "images/IMG-20251114-WA0516.jpg",
                duration: "60 minutos"
            },
            {
                id: 4,
                name: "Ligon Sensations",
                category: "rituais",
                description: "Experiência Sensorial Completa. Ritual profundo que combina purificação, toque quente, estímulos energéticos e técnicas relaxantes. Inclui esfoliação, massagem com vela, pedras quentes, drenagem, alongamentos e toalhas aquecidas.",
                price: 406.90,
                image: "images/IMG-20251114-WA0517.jpg",
                duration: "120 minutos"
            },
            // 2. MASSAGENS
            {
                id: 5,
                name: "Massagem com Pedras Quentes",
                category: "massagens",
                description: "Aconchego Térmico & Alívio Profundo. Ritual terapêutico que combina toque relaxante com o calor das pedras de basalto. Inclui escalda-pés, massagem em pés e panturrilhas com óleo e creme aquecido, e massagem corporal completa com técnicas de pedras quentes.",
                price: 316.90,
                image: "images/IMG-20251114-WA0504.jpg",
                duration: "85 minutos"
            },
            {
                id: 6,
                name: "Pindas Aromáticas",
                category: "massagens",
                description: "Aconchego Térmico & Alívio Profundo. Ritual terapêutico que combina toque relaxante com o calor das pindas aromáticas. A energia térmica dissolve tensões, acalma a mente e restaura o equilíbrio do corpo.",
                price: 316.90,
                image: "images/IMG-20251114-WA0512.jpg",
                duration: "85 minutos"
            },
            {
                id: 7,
                name: "Drenagem Linfática",
                category: "massagens",
                description: "Leveza & Bem-Estar Imediato. Técnica suave e ritmada que reduz o inchaço, ativa a circulação e promove equilíbrio corporal. Inclui escalda-pés com ervas e drenagem linfática corporal completa com manobras suaves.",
                price: 406.90,
                image: "images/IMG-20251114-WA0516.jpg",
                duration: "75 minutos"
            },
            // 3. HEAD SPA
            {
                id: 8,
                name: "Head Spa Master",
                category: "head-spa",
                description: "Relaxamento Profundo & Revitalização Capilar. Ritual completo que harmoniza mente, couro cabeludo e fios. Inclui escalda-pés aromático, massagem em pés e panturrilhas, ritual completo de limpeza + esfoliação + hidratação capilar e finalização profissional.",
                price: 436.99,
                image: "images/IMG-20251114-WA0517.jpg",
                duration: "80 minutos"
            },
            {
                id: 9,
                name: "Head Spa Therapy",
                category: "head-spa",
                description: "Diagnóstico Profissional & Relaxamento Profundo. Ritual completo que combina avaliação técnica com microscópio, estímulos sensoriais, massagem terapêutica e tratamento capilar de alta performance. Promove revitalização do couro cabeludo e equilíbrio mental.",
                price: 584.19,
                image: "images/IMG-20251114-WA0504.jpg",
                duration: "80 minutos"
            },
            {
                id: 10,
                name: "Head Spa Premium",
                category: "head-spa",
                description: "A Experiência Capilar Mais Completa da Ligon. Ritual exclusivo que une análise microscópica avançada, tratamento capilar profundo, massagem capilar, massagem corporal relaxante e pindas aromáticas aquecidas. Revitaliza os fios, acalma a mente e relaxa todo o corpo.",
                price: 656.99,
                image: "images/IMG-20251114-WA0512.jpg",
                duration: "105-120 minutos"
            },
            // 4. ESTÉTICA FACIAL
            {
                id: 11,
                name: "Ligon Pure Skin Express",
                category: "estetica-facial",
                description: "Renovação Rápida & Pele Revitalizada. Tratamento express para limpeza profunda leve, redução de brilho e melhora imediata da textura. Ideal para manutenção mensal. Inclui higienização, esfoliação suave, extração express e máscara calmante com cromoterapia.",
                price: 203.59,
                image: "images/IMG-20251114-WA0516.jpg",
                duration: "45 minutos"
            },
            {
                id: 12,
                name: "Ligon Dermo Revival Premium",
                category: "estetica-facial",
                description: "Limpeza Profunda & Renovação Avançada. Tratamento premium para peles que precisam de limpeza profunda, extração completa e regeneração imediata. Inclui higienização profunda, esfoliação avançada, vapor de ozônio, extração profunda exclusiva Ligon e máscara anti-inflamatória.",
                price: 312.99,
                image: "images/IMG-20251114-WA0517.jpg",
                duration: "90 minutos"
            },
            {
                id: 13,
                name: "Microagulhamento Facial",
                category: "estetica-facial",
                description: "Renovação, Colágeno & Textura Uniforme. Estimula a produção natural de colágeno, melhora a textura da pele e suaviza linhas, manchas e cicatrizes. Indicado para flacidez leve a moderada, acne, cicatrizes e manchas.",
                price: 193.59,
                image: "images/IMG-20251114-WA0504.jpg",
                duration: "45 minutos"
            },
            {
                id: 14,
                name: "Microagulhamento Labial (Hidragloss)",
                category: "estetica-facial",
                description: "Hidratação & Viço Natural. Procedimento focado na hidratação profunda dos lábios, melhora da textura e estímulo de colágeno. Deixa os lábios mais macios, viçosos e com aspecto saudável, sem aumento de volume.",
                price: 143.49,
                image: "images/IMG-20251114-WA0512.jpg",
                duration: "20 minutos"
            },
            {
                id: 15,
                name: "Preenchimento Facial",
                category: "estetica-facial",
                description: "Harmonização & Rejuvenescimento Natural. Restaura volumes, suaviza sulcos e melhora contornos faciais de forma equilibrada e personalizada. Indicado para perda de volume, sulcos profundos e assimetrias faciais.",
                price: 1200.00,
                image: "images/IMG-20251114-WA0516.jpg",
                duration: "60 minutos"
            },
            {
                id: 16,
                name: "Preenchimento Labial",
                category: "estetica-facial",
                description: "Definição, Hidratação & Volume Elegante. Promove hidratação profunda, definição do contorno e aumento sutil de volume, respeitando a anatomia labial e a naturalidade do sorriso.",
                price: 999.90,
                image: "images/IMG-20251114-WA0517.jpg",
                duration: "60 minutos"
            },
            {
                id: 17,
                name: "Toxina Botulínica (Botox)",
                category: "estetica-facial",
                description: "Suavização de Rugas & Prevenção do Envelhecimento. Tratamento consagrado para suavizar rugas dinâmicas e prevenir linhas de expressão. Proporciona aspecto descansado, rejuvenescido e natural. Indicado para testa, glabela e pés de galinha.",
                price: 1200.00,
                image: "images/IMG-20251114-WA0504.jpg",
                duration: "60 minutos"
            },
            // 5. LINHA AQUA LIGON
            {
                id: 18,
                name: "Banho Dourado & Esfoliação Mineral",
                category: "aqua-ligon",
                description: "Renovação & Brilho Natural. Experiência que revela a luminosidade natural da pele. A esfoliação com sais minerais e óleo de camélia purifica, ativa a circulação e deixa o toque sedoso. Inclui taça de espumante e snack leve.",
                price: 498.90,
                image: "images/IMG-20251114-WA0512.jpg",
                duration: "60 minutos"
            },
            {
                id: 19,
                name: "Banho de Lua Ligon",
                category: "aqua-ligon",
                description: "Clareamento & Delicadeza Lunar. Inspirado nos rituais de renovação feminina, este banho clareia, hidrata e ilumina a pele. Movimentos suaves aplicam o clareador corporal enquanto o ambiente brilha em tons perolados. Inclui escalda-pés com lavanda.",
                price: 589.90,
                image: "images/IMG-20251114-WA0516.jpg",
                duration: "60 minutos"
            },
            {
                id: 20,
                name: "Banho de Cleópatra – Rosas & Leite",
                category: "aqua-ligon",
                description: "Realeza & Nutrição Profunda. Um tributo ao feminino sagrado. O corpo é envolvido por uma mistura de leite de coco, mel e pétalas de rosas brancas. A experiência finaliza com massagem sensorial de 30 minutos que prolonga a hidratação e o conforto.",
                price: 658.90,
                image: "images/IMG-20251114-WA0517.jpg",
                duration: "90 minutos"
            },
            {
                id: 21,
                name: "Imersão Renascence Bath",
                category: "aqua-ligon",
                description: "Renascimento & Paz Profunda. Imersão meditativa para quem busca silêncio, acolhimento e reconexão. A banheira é preparada com flores naturais, essências nobres e cromoterapia dourada. Inclui imersão floral, massagem nas extremidades e mini brunch com espumante.",
                price: 989.89,
                image: "images/IMG-20251114-WA0504.jpg",
                duration: "90 minutos"
            },
            // 6. SPA DAY (Pacotes combinados)
            {
                id: 22,
                name: "Ligon Master Sensations",
                category: "spa-day",
                description: "Head Spa Master + Ligon Sensations. Ritual profundo que combina cuidado capilar, toque quente, estímulos energéticos e técnicas relaxantes. Inclui Head Spa Master completo, esfoliação, massagem com vela, pedras quentes, drenagem e alongamentos.",
                price: 675.12,
                image: "images/IMG-20251114-WA0512.jpg",
                duration: "160 minutos"
            },
            {
                id: 23,
                name: "Ligon Therapy Cleópatra",
                category: "spa-day",
                description: "Banho de Cleópatra + Head Spa Therapy + Ligon Pure Skin Express. Tributo ao feminino sagrado que une banho sensorial, tratamento capilar técnico e limpeza de pele express. Nutre o corpo, ilumina a pele e promove relaxamento profundo.",
                price: 1157.34,
                image: "images/IMG-20251114-WA0516.jpg",
                duration: "200 minutos"
            },
            {
                id: 24,
                name: "Ligon Premium Bath",
                category: "spa-day",
                description: "Ligon Soul Therapy + Head Spa Premium + Imersão Renascence Bath. Imersão completa que combina purificação, esfoliação, massagem terapêutica e rituais capilares premium. Nutre a pele, libera tensões e reconecta o corpo ao estado mais profundo de calma.",
                price: 1573.49,
                image: "images/IMG-20251114-WA0517.jpg",
                duration: "240 minutos"
            }
        ];

        // Load services from admin (localStorage)
        function loadAdminServices() {
            try {
                const adminServices = JSON.parse(localStorage.getItem('ligon_servicos') || '[]');
                // Convert admin services to site format
                const convertedServices = adminServices.map(as => ({
                    id: as.id,
                    name: as.nome,
                    category: as.categoria,
                    description: as.descricao,
                    price: as.preco,
                    image: (as.imagens && as.imagens.length > 0) ? as.imagens[0] : 'images/IMG-20251114-WA0504.jpg',
                    duration: as.duracao ? `${as.duracao} minutos` : '60 minutos'
                }));
                // Merge with existing services (admin services take priority if same ID)
                const existingIds = new Set(proceduresData.map(p => p.id));
                const newAdminServices = convertedServices.filter(as => !existingIds.has(as.id));
                proceduresData.push(...newAdminServices);
                // Update existing services with admin data
                convertedServices.forEach(as => {
                    const index = proceduresData.findIndex(p => p.id === as.id);
                    if (index !== -1) {
                        proceduresData[index] = as;
                    }
                });
            } catch (e) {
                console.error('Error loading admin services:', e);
            }
        }

        // Load admin services on page load
        loadAdminServices();

        let currentPage = 1;
        const itemsPerPage = 9;
        let filteredProcedures = [];

        // Atualizar filteredProcedures após carregar serviços do admin
        function updateFilteredProcedures() {
            filteredProcedures = [...proceduresData];
        }

        function formatPrice(price) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(price);
        }

        function getCategoryName(category) {
            const categories = {
                'rituais': 'Rituais Ligon',
                'massagens': 'Massagens',
                'head-spa': 'Head Spa',
                'estetica-facial': 'Estética Facial',
                'aqua-ligon': 'Linha Aqua Ligon',
                'spa-day': 'Spa Day'
            };
            return categories[category] || category;
        }

        function renderProcedures() {
            const grid = document.getElementById('proceduresGrid');
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const proceduresToShow = filteredProcedures.slice(startIndex, endIndex);

            if (proceduresToShow.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-spa"></i>
                        <h3>Nenhum procedimento encontrado</h3>
                        <p>Tente ajustar os filtros de busca</p>
                    </div>
                `;
                return;
            }

            grid.innerHTML = proceduresToShow.map(procedure => `
                <a href="procedimento-detalhes.html?id=${procedure.id}" class="procedure-card">
                    <div class="procedure-image">
                        <img src="${procedure.image}" alt="${procedure.name}" onerror="this.src='https://images.unsplash.com/photo-1540555700478-4be289fbecef?w=400&h=300&fit=crop'">
                        <div class="procedure-badge">${getCategoryName(procedure.category)}</div>
                    </div>
                    <div class="procedure-info">
                        <div class="procedure-category">${getCategoryName(procedure.category)}</div>
                        <h3 class="procedure-name">${procedure.name}</h3>
                        <p class="procedure-description">${procedure.description}</p>
                    </div>
                </a>
            `).join('');
        }

        function renderPagination() {
            const pagination = document.getElementById('pagination');
            const totalPages = Math.ceil(filteredProcedures.length / itemsPerPage);

            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }

            let paginationHTML = '';

            // Previous button
            paginationHTML += `
                <button onclick="changePage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>
                    <i class="fas fa-chevron-left"></i>
                </button>
            `;

            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 2 && i <= currentPage + 2)) {
                    paginationHTML += `
                        <button class="${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">
                            ${i}
                        </button>
                    `;
                } else if (i === currentPage - 3 || i === currentPage + 3) {
                    paginationHTML += `<span class="pagination-info">...</span>`;
                }
            }

            // Next button
            paginationHTML += `
                <button onclick="changePage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>
                    <i class="fas fa-chevron-right"></i>
                </button>
            `;

            // Info
            const startItem = (currentPage - 1) * itemsPerPage + 1;
            const endItem = Math.min(currentPage * itemsPerPage, filteredProcedures.length);
            paginationHTML += `
                <span class="pagination-info">
                    Mostrando ${startItem}-${endItem} de ${filteredProcedures.length} procedimentos
                </span>
            `;

            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            const totalPages = Math.ceil(filteredProcedures.length / itemsPerPage);
            if (page < 1 || page > totalPages) return;
            currentPage = page;
            renderProcedures();
            renderPagination();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function filterProcedures() {
            updateFilteredProcedures(); // Atualizar lista completa primeiro
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const sort = document.getElementById('sortFilter').value;

            filteredProcedures = filteredProcedures.filter(procedure => {
                const matchesSearch = procedure.name.toLowerCase().includes(searchTerm) ||
                                    procedure.description.toLowerCase().includes(searchTerm);
                const matchesCategory = !category || procedure.category === category;
                return matchesSearch && matchesCategory;
            });

            // Sort
            filteredProcedures.sort((a, b) => a.name.localeCompare(b.name));

            currentPage = 1;
            renderProcedures();
            renderPagination();
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', filterProcedures);
        document.getElementById('categoryFilter').addEventListener('change', filterProcedures);
        document.getElementById('sortFilter').addEventListener('change', filterProcedures);

        // Initial render - garantir que serviços do admin sejam carregados primeiro
        updateFilteredProcedures();
        renderProcedures();
        renderPagination();
    </script>
</body>
</html>

